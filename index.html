<!DOCTYPE html>
<html>
<head>
<title>Tracker</title>
</head>
<body>

<h1>ポイ活記録</h1>

<label for="date">日付:</label>
<input type="date" id="date"> <br>

<label for="activity">活動内容:</label>
<input type="text" id="activity"> <br>

<label for="points">獲得ポイント:</label>
<input type="number" id="points"> <br>

<button onclick="saveData()">保存</button>

<ul id="recordList"></ul>
<div id ="jsonText">aaa</div>

<script>
function saveData() {
  const date = document.getElementById('date').value;
  const activity = document.getElementById('activity').value;
  const points = document.getElementById('points').value;

  // ローカルストレージから既存のデータを取得、または空の配列で初期化
  let records = JSON.parse(localStorage.getItem('poiActivityRecords')) || [];

  // 新しいレコードを追加
  records.push({ date, activity, points });

  // ローカルストレージにデータを保存
  localStorage.setItem('poiActivityRecords', JSON.stringify(records));

  // リストを更新
  updateRecordList();

  // 入力欄をクリア
  document.getElementById('date').value = '';
  document.getElementById('activity').value = '';
  document.getElementById('points').value = '';
}

function updateRecordList() {
  const recordList = document.getElementById('recordList');
  recordList.innerHTML = ''; // リストをクリア

  const data = localStorage.getItem('poiActivityRecords');

  const records = JSON.parse(data) || [];

  records.forEach(record => {
    const listItem = document.createElement('li');
    listItem.textContent = `${record.date}: ${record.activity} (${record.points}ポイント)`;
    recordList.appendChild(listItem);
  });

  const divItem = document.getElementById('jsonText');
  divItem.innerHTML = '<div>' + data + '</div>';
}

// ページ読み込み時にリストを更新
updateRecordList();
</script>

</body>
</html>